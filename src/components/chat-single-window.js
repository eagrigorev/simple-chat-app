import { useParams, Redirect } from "react-router-dom";
import { useSelector } from "react-redux";
import { getChatList } from "../store/selectors/chat-list-selectors";
import { getMessageList } from "../store/selectors/message-list-selectors";
export const ChatSingleWindow = () => {
    const messageList = useSelector(getMessageList);
    const chatList = useSelector(getChatList);
    let { chatId } = useParams();
    if (chatId > chatList.length) {
        return <Redirect to="/error" />;
    }
    const userById = chatList.find(
        (user) => user.chatListId === Number(chatId)
    );
    const chatFiltered = messageList.filter(
        (message) =>
            message.messageListName === userById.chatListName ||
            message.messageListBody ===
                `This is a bot reply to ${userById.chatListName}. That message was generated by Firebase in three seconds.`
    );
    return chatFiltered.map((message) => (
        <div className="message" key={chatFiltered.indexOf(message)}>
            {message.messageListName}: {message.messageListBody}
        </div>
    ));
};
